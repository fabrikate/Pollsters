<div class="row">
  <div class="col-lg-5 col-xs-5">
    <div class="panel panel-success">
      <div class="panel-heading">
        <h3 class="panel-title">My Account</h3>
      </div>
      <div class="panel-body text-center">
        <div class="row">
          <div class="row text-center" ng-if="vm.emailErrors || vm.passwordErrors || vm.passwordsNotMatched">
            <p class="text-danger" ng-if="vm.emailErrors" ng-repeat="emailError in vm.emailErrors track by $index">Email {{emailError}}.</p>
            <p class="text-danger" ng-if="vm.passwordErrors" ng-repeat="passwordError in vm.passwordErrors track by $index">Password {{passwordError}}.</p>
            <p class="text-danger" ng-if="vm.passwordsNotMatched">{{vm.passwordsNotMatched}}</p>
          </div>
        </div>
        <div class="row">
          <div class="row text-center" ng-if="vm.emailChanged || vm.passwordChanged">
            <p class="text-success" ng-if="vm.emailChanged">{{vm.emailChanged}}</p>
            <p class="text-success" ng-if="vm.passwordChanged">{{vm.passwordChanged}}</p>
          </div>
        </div>
        <div class="row update-form-field" ng-if="!vm.updateEmail">
          <h4>Email: {{vm.user.email}}</h4>
        </div>
        <div class="row update-form-field" ng-if="vm.updateEmail">
          <form>
            <div class="update-form-field">
              <label for="updateEmail" class="update-form-field"><h4>New email: </h4></label>
              <input type="text" id="updateEmail" ng-model="vm.user.email" />
            </div>
          </form>
        </div>
        <div ng-hide="vm.updateEmail" class="row update-row">
          <button class="btn btn-default btn-sm" ng-click="vm.toggleEmailShow()">Update Email Address</button>
        </div>
        <div class="row update-form-field">
          <form ng-if="vm.resetPw">
            <div class="update-form-field">
              <label for="changePw" class="update-form-field"><h4>New password: </h4></label>
              <input type="password" id="changePw" ng-model="vm.user.password" />
            </div>
          </form>
          <form ng-if="vm.resetPw">
            <div class="update-form-field">
              <label for="pw2" class="update-form-field"><h4>Re-enter password: </h4></label>
              <input type="password" id="pw2" ng-model="vm.confirmPw" />
            </div>
          </form>
        </div>
        <div class="row update-row" ng-hide="vm.resetPw">
          <button class="btn btn-default btn-sm" ng-click="vm.togglePwReset()">Change Password</button>
        </div>
        <div class="row update-row" ng-if="vm.updateEmail || vm.resetPw">
          <div class="col-md-4 col-md-offset-2">
            <button class="btn btn-info" ng-click="vm.updateUser()">Submit</button>
          </div>
          <div class="col-md-4">
            <button class="btn btn-info" ng-click="vm.reset()">Cancel</button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="col-lg-7 col-xs-7">
    <div class="panel panel-info">
      <div class="panel-heading">
        <h3 class="panel-title">My Polls</h3>
      </div>
      <div class="panel-body">
        <table class="table table-striped text-left">
          <thead>
          <tr>
            <th>Poll</th>
            <th>View</th>
            <th>Delete</th>

          </thead>
          <tbody>
            <tr ng-repeat="poll in vm.userPolls">
              <td>{{poll.title}}</td>
              <td><a href="/polls/{{poll.id}}">Go</a></td>
              <td><button type="button" ng-click="vm.deletePoll(poll)">delete</button></td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>
